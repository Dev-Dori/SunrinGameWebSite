<!doctype html>
{% load static %}
<html>

<head>
    <meta charset="UTF-8">
    <title>Ketu</title>
    <link rel="stylesheet" href="{% static 'css/ketu.css' %}?after">
    <script type="text/javascript" src="{% static 'js/ketu.js' %}"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Brush+Script&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="http://code.jquery.com/jquery-latest.js"></script>

    <script>
        var using = 1;
        function userTime() { //  유저 타이머
            var a = document.getElementById("userTime_bar");
            a.style.width = 0 + "%";
            for (i = 1; i <= 1000000; i++) {
                (function (x) {
                    setTimeout(function () {
                        a.style.width = x / 100 + "%";
                        if (x == 1000000) {
                            using = 1;
                        }
                    }, x);
                })(i);
            }
        }

        function gameTime() { //
            var a = document.getElementById("timer_bar");
            a.style.width = 0 + "%";
            for (i = 1; i <= 10000; i++) {
                (function (x) {
                    setTimeout(function () {
                        a.style.width = x / 100 + "%";
                        if (x == 10000) {
                            alert("timeover")
                            using = 1;
                        }
                    }, x);
                })(i);
            }
        }

        function start() {
            if(using == 1){
                using = 0;
                var bg = document.getElementById("GS");
                bg.style.display ="none";
                imagePopup('open');
            }
        }

        function imagePopup(type) {
            if(type == 'open') {
                // 팝업창을 연다.
                jQuery('#layer').attr('style','display:inline');
                // 페이지를 가리기위한 레이어 영역의 높이를 페이지 전체의 높이와 같게 한다.
                jQuery('#layer').height(jQuery(document).height());
            }
            else if(type == 'close') {
                // 팝업창을 닫는다.
                jQuery('#layer').attr('style','display:none');
                userTime();
                gameTime();
            }
        }
    </script>

    <style>
        .u_word{
            color: white;
            text-align: left;
            background-position: left;
            background-position-x: 8px;
            background-image: url(/static/img/ketu/user.png);
            background-size: 371px 92px;
            background-repeat: no-repeat;
            height: 100px;
            margin-top: -40px;
            padding: 54px 0px 0px 43px;
        }

        .b_word {
            text-align: right;
            margin: -50px 0px 0px 0px;
            color: white;
            padding: 65px 40px 0px 0px;
            height: 80px;
            background-image: url(/static/img/ketu/bot.png);
            background-size: 371px 92px;
            background-position: right;
            background-position-y: 45px;
            background-repeat: no-repeat;
        }

        .word{
            margin-bottom: 10px;
        }
    </style>





</head>

<body>

    <div id="d1">
        <div id="info" class="g_info">
            <div><a href="../">홈으로</a></div>
            <div id="START_LOGO" onclick="start();"><img id="GS" src="{% static 'img/ketu/GS.png' %}"></div>
        </div>

        <div id="game_box">
            <!-- 플레이어 박스 -->
            <div id="Player_box" class="P_box">
                <img src="{% static 'img/ketu/left.png' %}" onclick="Pword('test')">
            </div>
            <!-- 플레이어 박스 끝-->

            <div id="main_box" class="main_box">

                <!--게임정보가 담겨있는 DIV-->
                <div id="gameinfo">

                    <!--첫 단어가 생성되는 곳-->
                    <div id="first_word">
                        <div id="f_msg">{{first_word}}</div>
                    </div>

                    <!--타이머 부분-->
                    <div id="timer">
                        <div id="timer_bar" class="timer_bar"></div>
                        <div id="userTime_bar" class="timer_bar"></div>
                    </div>

                </div>
                <!--게임정보가 담겨있는 DIV 끝-->



                <!--입력하고 받은 단어가 추가되는 공간-->
                <div id="word_list" class="g_info"> </div>
                <!--입력하고 받은 단어가 추가되는 공간 끝-->


                <!--단어입력-->
                <div id="input_word" class="g_info">
                    <input type="text" id="msg" placeholder="여기에 입력하세요." onKeyPress="if( event.keyCode==13 ){msg();}">
                </div>
                <!--단어입력 끝-->

            </div>


            <!-- 봇 박스 -->
            <div id="BOT_box" class="P_box">
                <img src="{% static 'img/ketu/right.png' %}" onclick="Pword('test')">
            </div>
            <!-- 봇 박스 끝-->

        </div>
    </div>




    <!--팝업창 시작-->
    <div id="layer" style="display:none">   
        <div id="popup">
            <!-- 팝업창 닫기 버튼 -->
            <a id="close" href="javascript:" onClick="imagePopup('close')">
                닫기
            </a>
            <br/>
            <h1>여기는 팝업창이다!@!</h1>
        <div>
    </div>
    <!--팝업창 끝-->


</body>

</html>