<!doctype html>
{% load static %}
<html>

<head>
    <meta charset="UTF-8">
    <title>Ketu</title>
    <link rel="stylesheet" href="{% static 'css/ketu.css' %}?after">
    <script type="text/javascript" src="{% static 'js/ketu.js' %}"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Brush+Script&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="http://code.jquery.com/jquery-latest.js"></script>

    <script>
        var using = 1;
        function userTime() { //  유저 타이머
            var a = document.getElementById("userTime_bar");
            a.style.width = 0 + "%";
            using = 0;
            for (i = 1; i <= 10000; i++) {
                (function (x) {
                    setTimeout(function () {
                        a.style.width = x / 100 + "%";
                        if (x == 10000) {
                            using = 1;
                        }
                    }, x);
                })(i);
            }
        }

        function gameTime() { //
            var a = document.getElementById("timer_bar");
            a.style.width = 0 + "%";
            using = 0;
            for (i = 1; i <= 10000; i++) {
                (function (x) {
                    setTimeout(function () {
                        a.style.width = x / 100 + "%";
                        if (x == 10000) {
                            alert("timeover")
                            using = 1;
                        }
                    }, x);
                })(i);
            }
        }

        async function start() {
            if(using){
            await userTime();
            await gameTime()
            }else{
                alert("이미 실행중입니다..");
            }
        }

    </script>

    <style>
        .u_word{
            color: white;
            text-align: left;
            background-image: url("{% static 'img/ketu/pngegg.png' %}");
            background-size: 200px 50px;
            background-repeat: no-repeat;
            height: 100px;
        }

        .b_word {
            text-align: right;
            color: white;
            background-color: grey;
        }

        .word{
            margin-bottom: 10px;
        }

    </style>


</head>

<body>

    <div id="d1">
        <div id="info" class="g_info" onclick="start();">
            <div><img id="GS" src="{% static 'img/ketu/GS.png' %}"></div>
        </div>

        <div id="game_box">
            <!-- 플레이어 박스 -->
            <div id="Player_box" class="P_box">
                <img src="{% static 'img/ketu/left.png' %}" onclick="Pword('test')">
            </div>
            <!-- 플레이어 박스 끝-->

            <div id="main_box" class="main_box">

                <!--게임정보가 담겨있는 DIV-->
                <div id="gameinfo">

                    <!--첫 단어가 생성되는 곳-->
                    <div id="first_word">
                        <div id="f_msg">{{first_word}}</div>
                    </div>

                    <!--타이머 부분-->
                    <div id="timer">
                        <div id="timer_bar" class="timer_bar"></div>
                        <div id="userTime_bar" class="timer_bar"></div>
                    </div>

                </div>
                <!--게임정보가 담겨있는 DIV 끝-->



                <!--입력하고 받은 단어가 추가되는 공간-->
                <div id="word_list" class="g_info"> </div>
                <!--입력하고 받은 단어가 추가되는 공간 끝-->


                <!--단어입력-->
                <div id="input_word" class="g_info">
                    <input type="text" id="msg" placeholder="여기에 입력하세요." onKeyPress="if( event.keyCode==13 ){msg();}">
                </div>
                <!--단어입력 끝-->

            </div>


            <!-- 봇 박스 -->
            <div id="BOT_box" class="P_box">
                <img src="{% static 'img/ketu/right.png' %}" onclick="Pword('test')">
            </div>
            <!-- 봇 박스 끝-->

        </div>
    </div>


</body>

</html>